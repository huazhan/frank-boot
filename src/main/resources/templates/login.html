<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>Login Page</title>
		<link rel="stylesheet" href="../../component/pear/css/pear.css"  media="all">
		<link rel="stylesheet" href="../../admin/css/other/login.css"  media="all">
	</head>
    <!-- 代 码 结 构 -->
	<body background="../../admin/images/background2.svg" style="background-size: cover;">
		<form class="layui-form" action="javascript:void(0);">
			<div class="layui-form-item">
				<img class="logo" src="../../admin/images/logo-cat.png" />
				<div class="title">frank-boot</div>
				<div class="desc">
					springboot + springsecurity + mybatis + mysql
				</div>
			</div>
			<div class="layui-form-item">
				<input placeholder="账 户 : admin " id="username" hover class="layui-input"  />
			</div>
			<div class="layui-form-item">
				<input placeholder="密 码 : 123456 " id="password" hover class="layui-input"  />
			</div>
			<!-- <div class="layui-form-item">
				<input placeholder="验证码 : "  hover class="code layui-input layui-input-inline"  />
				<img src="../../admin/images/captcha.gif" class="codeImage" />
			</div>
			<div class="layui-form-item">
				<input type="checkbox" name="" title="记住密码" lay-skin="primary" checked>
			</div> -->
			<div class="layui-form-item">
				<button class="pear-btn pear-btn-success login" lay-submit lay-filter="login">
					登 入
				</button>
			</div>
		</form>
		<!-- 资 源 引 入 -->
		<script src="../../component/layui/layui.js" charset="utf-8"></script>
		<script src="../../component/pear/pear.js" charset="utf-8"></script>
		<script>
			layui.use(['form', 'element', 'jquery', 'button', 'popup','layer'], function() {
				var form = layui.form;
				var element = layui.element;
				var button = layui.button;
				var popup = layui.popup;
				var layer = layui.layer;
				var $ = layui.jquery;

                // 登 录 提 交
				form.on('submit(login)', function(data) {
					button.load({
						elem: '.login',
						time: 1000,
						done: function() {
							
							var username = $("#username").val();
							var password = $("#password").val();
							var url = "/login";
							$.post(url,{"username":username,"password":password},function(result){
								console.log('result:',result);
								if(result.code == 0){
									layer.msg("登录成功", {icon: 1,time: 2000},function(){
										location.href = "/index";
									});
								}else if("Bad credentials" == result.msg){
									layer.msg("账号或密码错误", {icon: 2,time: 2000});
								}else{
									layer.msg(result.msg, {icon: 2,time: 2000});
								}
							});
							
							
						}
					})
					return false;
				});
			})
		</script>
	</body>
</html>
